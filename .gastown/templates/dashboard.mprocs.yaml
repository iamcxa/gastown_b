# Gastown Dashboard - mprocs Configuration Template
#
# This template shows the format used by `gastown dashboard` to create
# an mprocs configuration for viewing all running convoys.
#
# mprocs is a TUI tool for running multiple processes.
# Install it with: brew install mprocs
#
# When you run `gastown dashboard`, it automatically generates a config
# like this based on your active convoys.
#
# Key design decisions:
# - mprocs only "attaches" to tmux sessions - closing mprocs leaves sessions running
# - Each convoy shows up as a separate mprocs pane with status icon
# - A "status" pane shows overall convoy status with Gastown branding
# - Uses bash loop for cross-platform compatibility (macOS doesn't have `watch`)

proc_list_width: 25

procs:
  # Status overview with Gastown ASCII banner
  # Refreshes every 2 seconds using bash loop (cross-platform)
  "â›½ Status":
    shell: "bash -c 'while true; do clear; echo -e \"\\033[1m\\033[33m
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘     â›½  G A S   T O W N  â›½          â•‘
   â•‘         Dashboard v1.0                â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
\\033[0m\"; echo -e \"\\033[36mLast updated: $(date +%H:%M:%S)\\033[0m\"; echo; gastown --status 2>/dev/null; sleep 2; done'"

  # Example convoy panes with status icons:
  #
  # ðŸŸ¢ = running (tmux session active)
  # ðŸŸ¡ = idle (convoy open but no session)
  # ðŸ”´ = stopped (convoy closed)

  "ðŸŸ¢ chess-game":
    shell: "tmux attach -t gastown-abc123 2>/dev/null || echo -e \"\\033[32m\\033[1mSession: gastown-abc123\\033[0m\\n\\033[2mStatus: running\\nNot attached. Press 'r' to retry.\\033[0m\""

  "ðŸŸ¡ auth-feature":
    shell: "tmux attach -t gastown-def456 2>/dev/null || echo -e \"\\033[33m\\033[1mSession: gastown-def456\\033[0m\\n\\033[2mStatus: idle\\nNot attached. Press 'r' to retry.\\033[0m\""

# When no convoys are active, a welcome pane is shown:
#
#   "ðŸ“‹ Welcome":
#     shell: "echo -e \"\\033[33m\\033[1mWelcome to Gas Town!\\033[0m\\n\\n...\"

# Keyboard shortcuts in mprocs:
# q    - quit dashboard (sessions keep running)
# j/k  - navigate process list
# s    - start process
# x    - stop process
# r    - restart process
# ?    - toggle help
